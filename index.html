<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Discarded Elephants - Premium Elephant Marketplace</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
/* ================== GLOBAL RESET ================== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    width: 100%;
    max-width: 100%;
    overflow-x: hidden;
    font-family: 'Inter', sans-serif;
    background: #f8f9fa;
    color: #2d3748;
}

/* ================== HEADER ================== */
.header {
    background: white;
    position: sticky;
    top: 0;
    z-index: 1000;
    border-bottom: 3px solid #d4af37;
}

.header-main {
    max-width: 1200px;
    margin: auto;
    padding: 16px;
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    justify-content: space-between;
    align-items: center;
}

/* ================== HERO ================== */
.hero {
    max-width: 1200px;
    margin: auto;
    padding: 24px 16px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
}

.hero-content h1 {
    font-size: 42px;
    line-height: 1.2;
    margin-bottom: 12px;
}

.hero-subtitle {
    font-size: 16px;
    line-height: 1.6;
    color: #718096;
}

/* ================== CATEGORY GRID ================== */
.category-section {
    margin-top: 24px;
}

.category-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
}

.category-card {
    width: 100%;
    padding: 14px;
    border-radius: 12px;
    border: 2px solid #e2e8f0;
    background: white;
    text-align: center;
}

.category-card.active {
    background: linear-gradient(135deg, #d4af37, #f4e5c3);
}

/* ================== ELEPHANT DETAILS ================== */
.elephant-details {
    margin-top: 20px;
    padding: 16px;
    background: #f7fafc;
    border-left: 4px solid #d4af37;
    border-radius: 10px;
}

.elephant-specs {
    display: grid;
    gap: 10px;
}

/* ================== PRICING ================== */
.pricing-section {
    margin-top: 20px;
    padding: 16px;
    background: white;
    border-radius: 12px;
    border: 2px solid #e2e8f0;
}

/* ================== BUTTONS ================== */
.action-buttons {
    display: flex;
    gap: 12px;
    margin-top: 16px;
}

.btn {
    width: 100%;
    padding: 14px;
    border-radius: 10px;
    font-weight: 700;
    border: none;
}

/* ================== CANVAS ================== */
.canvas-container {
    width: 100%;
    max-width: 100%;
    height: 360px;
    background: #f7fafc;
    border-radius: 16px;
    border: 2px solid #e2e8f0;
    box-shadow: 0 8px 24px rgba(0,0,0,0.08);
    overflow: hidden;
}

#elephant-canvas {
    width: 100% !important;
    height: 100% !important;
    display: block;
}

/* ================== ACCESSORIES ================== */
.product-grid {
    max-width: 1200px;
    margin: auto;
    padding: 24px 16px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 16px;
}

/* ================== MOBILE FIX ================== */
@media (max-width: 768px) {

    .hero {
        grid-template-columns: 1fr;
    }

    .hero-content h1 {
        font-size: 28px;
    }

    .category-grid {
        grid-template-columns: 1fr 1fr;
    }

    .action-buttons {
        flex-direction: column;
    }

    .canvas-container {
        height: 280px;
    }
}
</style>
    
</head>
<body>
    <div class="header">
        <div class="header-top">
            ‚ú® Ethical Elephant Rehoming ‚Ä¢ Worldwide Delivery ‚Ä¢ 24/7 Support
        </div>
        <div class="header-main">
            <div class="logo-section">
                <div class="logo">
                    <span class="logo-icon">üêò</span>
                    The Discarded Elephants
                </div>
                <div class="company-info">
                    Operated by Broken Bone Pvt Ltd ‚Ä¢ Proprietor: Abhishek Sarda, Chandrapur, Maharashtra
                </div>
            </div>
            <div class="header-actions">
                <div class="currency-selector">
                    <button class="currency-btn" onclick="toggleCurrency()">
                        <span id="currency-flag">üáÆüá≥</span>
                        <span id="currency-code">INR</span>
                        <span>‚ñº</span>
                    </button>
                    <div class="currency-dropdown" id="currency-dropdown">
                        <input type="text" class="currency-search" id="currency-search" placeholder="Search currency...">
                        <div class="currency-list" id="currency-list"></div>
                    </div>
                </div>
                <button class="cart-btn" onclick="openCartModal()">
                    üõí Cart <span class="cart-count" id="cart-count">0</span>
                </button>
            </div>
        </div>
    </div>

    <main>
        <section class="hero">
            <div class="hero-content">
                <h1>Second Chances for Majestic Beings</h1>
                <p class="hero-subtitle">Every elephant deserves a loving home. We specialize in rehoming elephants with unique stories and circumstances. Certified, ethical, and completely transparent.</p>

                <div class="category-section">
                    <div class="section-label">Select Elephant Category</div>
                    <div class="category-grid">
                        <div class="category-card active" onclick="selectCategory('big', this)">
                            <span class="category-icon">üêò</span>
                            <div class="category-name">Big Size</div>
                        </div>
                        <div class="category-card" onclick="selectCategory('small', this)">
                            <span class="category-icon">üêò</span>
                            <div class="category-name">Small Size</div>
                        </div>
                        <div class="category-card" onclick="selectCategory('intelligent', this)">
                            <span class="category-icon">üß†</span>
                            <div class="category-name">Intelligent</div>
                        </div>
                        <div class="category-card" onclick="selectCategory('sad', this)">
                            <span class="category-icon">üò¢</span>
                            <div class="category-name">Sad</div>
                        </div>
                        <div class="category-card" onclick="selectCategory('guilty', this)">
                            <span class="category-icon">üòî</span>
                            <div class="category-name">Guilty</div>
                        </div>
                    </div>
                </div>

                <div class="elephant-details" id="elephant-details">
                    <!-- Details populated by JavaScript -->
                </div>

                <div class="pricing-section">
                    <div class="price-row">
                        <span class="price-label">Base Price</span>
                        <span class="price-amount" id="base-price">‚Çπ5,800</span>
                    </div>
                    <div class="bargain-section">
                        <div class="bargain-label">üí∞ Want to bargain? Enter your offer:</div>
                        <div class="bargain-input-group">
                            <input type="number" class="bargain-input" id="bargain-input" placeholder="Enter amount">
                            <button class="bargain-btn" onclick="applyBargain()">Apply</button>
                        </div>
                    </div>
                </div>

                <div class="quantity-section">
                    <div class="section-label">Select Quantity</div>
                    <div class="quantity-selector">
                        <button class="qty-btn" onclick="decreaseQty()" id="qty-minus">‚àí</button>
                        <span class="qty-display" id="qty-display">1</span>
                        <button class="qty-btn" onclick="increaseQty()">+</button>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="buyNow()">‚ö° Buy Now</button>
                    <button class="btn btn-secondary" onclick="addToCart('elephant')">üõí Add to Cart</button>
                </div>
            </div>

            <div class="canvas-container">
                <canvas id="elephant-canvas"></canvas>
            </div>
        </section>

        <section class="trust-badges">
            <div class="badges-grid">
                <div class="badge-item">
                    <div class="badge-icon">‚úÖ</div>
                    <div class="badge-title">100% Verified</div>
                    <div class="badge-desc">All elephants health certified</div>
                </div>
                <div class="badge-item">
                    <div class="badge-icon">üåç</div>
                    <div class="badge-title">Global Delivery</div>
                    <div class="badge-desc">Safe transport worldwide</div>
                </div>
                <div class="badge-item">
                    <div class="badge-icon">üè•</div>
                    <div class="badge-title">Lifetime Care</div>
                    <div class="badge-desc">24/7 veterinary support</div>
                </div>
                <div class="badge-item">
                    <div class="badge-icon">üîí</div>
                    <div class="badge-title">Secure Payment</div>
                    <div class="badge-desc">GST compliant billing</div>
                </div>
            </div>
        </section>

        <section class="accessories">
            <div class="section-header">
                <h2>Essential Accessories</h2>
                <p>Everything your elephant needs for a comfortable life</p>
            </div>
            <div class="product-grid" id="product-grid">
                <!-- Products populated by JavaScript -->
            </div>
        </section>
    </main>

    <!-- Cart Modal -->
    <div class="modal" id="cart-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üõí Your Cart</h2>
                <button class="close-btn" onclick="closeCartModal()">√ó</button>
            </div>
            <div class="modal-body" id="cart-body">
                <!-- Cart items populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div class="modal" id="checkout-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üì¶ Checkout</h2>
                <button class="close-btn" onclick="closeCheckoutModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Delivery City *</label>
                    <input type="text" class="form-input" id="delivery-city" placeholder="e.g., Nagpur, India">
                </div>
                <div class="form-group">
                    <label class="form-label">Your Name *</label>
                    <input type="text" class="form-input" id="customer-name" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label class="form-label">Contact Number *</label>
                    <input type="tel" class="form-input" id="customer-phone" placeholder="Enter phone number">
                </div>
                <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="generateBill()">
                    Complete Order & Download Bill
                </button>
            </div>
        </div>
    </div>

    <div class="notification" id="notification">
        <div class="notification-title" id="notif-title"></div>
        <div class="notification-message" id="notif-message"></div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <h3>üêò The Discarded Elephants</h3>
            <div class="footer-info">
                <strong>Broken Bone Pvt Ltd</strong><br>
                Proprietor: Abhishek Sarda<br>
                Chandrapur, Maharashtra, India<br>
                Contact: +91-XXXX-XXXXXX | Email: support@discardedelephants.com
            </div>
            <div class="footer-legal">
                ¬© 2026 The Discarded Elephants. All rights reserved. | GST Compliant | Ethical Elephant Rehoming
            </div>
        </div>
    </footer>

    <script>
        // Currency System
        const currencies = [
            { code: 'INR', name: 'Indian Rupee', symbol: '‚Çπ', flag: 'üáÆüá≥', rate: 1 },
            { code: 'USD', name: 'US Dollar', symbol: '$', flag: 'üá∫üá∏', rate: 0.012 },
            { code: 'RUB', name: 'Russian Ruble', symbol: '‚ÇΩ', flag: 'üá∑üá∫', rate: 1.19 },
            { code: 'EUR', name: 'Euro', symbol: '‚Ç¨', flag: 'üá™üá∫', rate: 0.011 },
            { code: 'GBP', name: 'British Pound', symbol: '¬£', flag: 'üá¨üáß', rate: 0.0095 },
            { code: 'JPY', name: 'Japanese Yen', symbol: '¬•', flag: 'üáØüáµ', rate: 1.82 },
            { code: 'CNY', name: 'Chinese Yuan', symbol: '¬•', flag: 'üá®üá≥', rate: 0.086 },
            { code: 'AUD', name: 'Australian Dollar', symbol: 'A$', flag: 'üá¶üá∫', rate: 0.019 },
            { code: 'CAD', name: 'Canadian Dollar', symbol: 'C$', flag: 'üá®üá¶', rate: 0.017 },
            { code: 'CHF', name: 'Swiss Franc', symbol: 'Fr', flag: 'üá®üá≠', rate: 0.011 },
            { code: 'AED', name: 'UAE Dirham', symbol: 'ÿØ.ÿ•', flag: 'üá¶üá™', rate: 0.044 },
            { code: 'SGD', name: 'Singapore Dollar', symbol: 'S$', flag: 'üá∏üá¨', rate: 0.016 },
        ];

        let currentCurrency = currencies[0];
        let selectedCategory = 'big';
        let currentQty = 1;
        let bargainedPrice = null;

        // Category Details
        const categoryDetails = {
            big: {
                title: 'Big Size Elephant',
                icon: 'üêò',
                price: 5800,
                description: 'A magnificent gentle giant perfect for families and businesses.',
                specs: [
                    { icon: 'üìè', text: 'Height: 10-13 feet (3-4 meters)' },
                    { icon: '‚öñÔ∏è', text: 'Weight: 4000-6000 kg' },
                    { icon: 'üéÇ', text: 'Age: 15-25 years' },
                    { icon: 'üåü', text: 'Temperament: Calm and gentle, excellent with children' },
                    { icon: 'üí™', text: 'Capability: Can carry up to 4 passengers comfortably' },
                    { icon: 'üéØ', text: 'Special: Previously worked in tourism, very well-trained' }
                ]
            },
            small: {
                title: 'Small Size Elephant',
                icon: 'üêò',
                price: 3500,
                description: 'Compact and manageable, perfect for urban environments.',
                specs: [
                    { icon: 'üìè', text: 'Height: 6-8 feet (1.8-2.4 meters)' },
                    { icon: '‚öñÔ∏è', text: 'Weight: 1500-2500 kg' },
                    { icon: 'üéÇ', text: 'Age: 8-15 years' },
                    { icon: 'üåü', text: 'Temperament: Playful and energetic' },
                    { icon: 'üè°', text: 'Space Required: Minimal - suitable for smaller properties' },
                    { icon: 'üéØ', text: 'Special: Great for beginners, easy to care for' }
                ]
            },
            intelligent: {
                title: 'Intelligent Elephant',
                icon: 'üß†',
                price: 12000,
                description: 'Exceptionally smart elephant with remarkable cognitive abilities.',
                specs: [
                    { icon: 'üéì', text: 'IQ Equivalent: Above average intelligence' },
                    { icon: 'üíº', text: 'Can perform financial calculations and assist CAs' },
                    { icon: 'üìä', text: 'Understands complex spreadsheets and ledgers' },
                    { icon: 'üò≥', text: 'Highly shameful about its intelligence - very modest' },
                    { icon: 'üßÆ', text: 'Can solve mathematical problems up to calculus level' },
                    { icon: 'üìö', text: 'Previously worked at an accounting firm for 3 years' },
                    { icon: 'üéØ', text: 'Special: Knows Excel, QuickBooks, and Tally ERP' }
                ]
            },
            sad: {
                title: 'Sad Elephant',
                icon: 'üò¢',
                price: 2000,
                description: 'A gentle soul needing love and emotional support.',
                specs: [
                    { icon: 'üíî', text: 'Recently separated from previous owner' },
                    { icon: 'ü•∫', text: 'Needs extra care and affection' },
                    { icon: 'ü§ó', text: 'Responds wonderfully to kindness and patience' },
                    { icon: 'üåà', text: 'With proper love, becomes incredibly loyal' },
                    { icon: '‚è∞', text: 'Requires 2-3 hours daily companionship initially' },
                    { icon: 'üéØ', text: 'Special: Perfect for someone looking for deep bonding' }
                ]
            },
            guilty: {
                title: 'Guilty Elephant (Past Acts)',
                icon: 'üòî',
                price: 1500,
                description: 'Reformed elephant seeking redemption and a second chance.',
                specs: [
                    { icon: 'üì∫', text: 'Caught watching web series at client location' },
                    { icon: 'üçø', text: 'Binge-watched entire season during work hours' },
                    { icon: 'üòÖ', text: 'Extremely remorseful about the incident' },
                    { icon: 'üîÑ', text: 'Completed behavioral rehabilitation program' },
                    { icon: '‚úÖ', text: 'Now certified as "Screen-Free Worker"' },
                    { icon: 'üíù', text: 'Deserves a second chance - everyone makes mistakes' },
                    { icon: 'üéØ', text: 'Special: Comes with lifetime Netflix ban agreement' }
                ]
            }
        };

        // Products
        const products = [
            { id: 'costume', name: 'Royal Elephant Costume', icon: 'üëë', price: 2100, desc: 'Handcrafted traditional costume with golden ornaments' },
            { id: 'saddle', name: 'Premium Saddle Set', icon: 'üé™', price: 3780, desc: 'Ergonomic 4-passenger saddle with safety harness' },
            { id: 'food', name: 'Gourmet Food Package', icon: 'ü•ú', price: 10080, desc: '30-day supply of premium nutrition' },
            { id: 'bath', name: 'Elephant Spa Kit', icon: 'üöø', price: 2940, desc: 'Complete grooming and bathing set' },
            { id: 'shelter', name: 'Deluxe Shelter', icon: 'üè†', price: 29400, desc: 'Climate-controlled 200 sq meter shelter' },
            { id: 'toys', name: 'Entertainment Bundle', icon: '‚öΩ', price: 4620, desc: 'Interactive toys and enrichment items' },
            { id: 'medical', name: 'Healthcare Kit', icon: 'üíä', price: 6720, desc: 'Medical supplies and vet consultations' },
            { id: 'training', name: 'Training Manual', icon: 'üìö', price: 1260, desc: 'Comprehensive care and training guide' }
        ];

        let cart = {};
        let productQty = {};

        // Initialize
        renderCurrencyList();
        renderProducts();
        updateElephantDetails();

        function renderCurrencyList() {
            const list = document.getElementById('currency-list');
            list.innerHTML = currencies.map(curr => `
                <div class="currency-item ${curr.code === currentCurrency.code ? 'selected' : ''}" 
                     onclick="selectCurrency('${curr.code}')">
                    <div>
                        <span>${curr.flag}</span>
                        <span style="margin-left: 8px; font-weight: 600;">${curr.code}</span>
                        <span style="margin-left: 6px; color: #718096; font-size: 12px;">${curr.name}</span>
                    </div>
                    <span style="font-weight: 600;">${curr.symbol}</span>
                </div>
            `).join('');
        }

        function renderProducts() {
            const grid = document.getElementById('product-grid');
            grid.innerHTML = products.map(p => `
                <div class="product-card">
                    <span class="product-icon">${p.icon}</span>
                    <h3>${p.name}</h3>
                    <p>${p.desc}</p>
                    <div class="product-price" data-base-price="${p.price}">
                        ${formatPrice(p.price)}
                    </div>
                    <div class="product-qty">
                        <button class="qty-btn" onclick="changeProductQty('${p.id}', -1)" style="width: 35px; height: 35px; font-size: 18px;">‚àí</button>
                        <span class="qty-display" id="qty-${p.id}" style="font-size: 18px;">0</span>
                        <button class="qty-btn" onclick="changeProductQty('${p.id}', 1)" style="width: 35px; height: 35px; font-size: 18px;">+</button>
                    </div>
                    <button class="btn btn-secondary" onclick="addProductToCart('${p.id}')">
                        <span>Add to Cart</span>
                    </button>
                </div>
            `).join('');
        }

        function changeProductQty(id, delta) {
            if (!productQty[id]) productQty[id] = 0;
            productQty[id] = Math.max(0, productQty[id] + delta);
            document.getElementById(`qty-${id}`).textContent = productQty[id];
        }

        function toggleCurrency() {
            document.getElementById('currency-dropdown').classList.toggle('active');
        }

        function selectCurrency(code) {
            currentCurrency = currencies.find(c => c.code === code);
            document.getElementById('currency-flag').textContent = currentCurrency.flag;
            document.getElementById('currency-code').textContent = currentCurrency.code;
            bargainedPrice = null;
            document.getElementById('bargain-input').value = '';
            updateAllPrices();
            renderCurrencyList();
            toggleCurrency();
        }

        function formatPrice(amountINR) {
            const converted = amountINR * currentCurrency.rate;
            const formatted = converted.toFixed(currentCurrency.code === 'JPY' ? 0 : 2);
            return `${currentCurrency.symbol}${parseFloat(formatted).toLocaleString()}`;
        }

        function updateAllPrices() {
            const basePrice = bargainedPrice || categoryDetails[selectedCategory].price;
            document.getElementById('base-price').textContent = formatPrice(basePrice);
            
            document.querySelectorAll('.product-price').forEach(el => {
                const base = parseFloat(el.dataset.basePrice);
                el.textContent = formatPrice(base);
            });
        }

        function selectCategory(cat, el) {
            selectedCategory = cat;
            bargainedPrice = null;
            document.getElementById('bargain-input').value = '';
            
            document.querySelectorAll('.category-card').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            
            updateElephantDetails();
            updateAllPrices();
            updateElephantAppearance();
        }

        function updateElephantDetails() {
            const details = categoryDetails[selectedCategory];
            const html = `
                <h3>${details.icon} ${details.title}</h3>
                <p style="color: #718096; margin-bottom: 16px; line-height: 1.6;">${details.description}</p>
                <div class="elephant-specs">
                    ${details.specs.map(s => `
                        <div class="spec-item">
                            <span class="spec-icon">${s.icon}</span>
                            <span>${s.text}</span>
                        </div>
                    `).join('')}
                </div>
            `;
            document.getElementById('elephant-details').innerHTML = html;
        }

        function applyBargain() {
            const input = document.getElementById('bargain-input');
            const value = parseFloat(input.value);
            const basePrice = categoryDetails[selectedCategory].price;
            
            if (!value || value <= 0) {
                showNotification('Invalid Amount', 'Please enter a valid bargain amount');
                return;
            }

            const inINR = value / currentCurrency.rate;
            
            if (inINR >= basePrice * 0.7 && inINR <= basePrice) {
                bargainedPrice = inINR;
                updateAllPrices();
                showNotification('Bargain Accepted! üéâ', `New price: ${formatPrice(inINR)}`);
            } else if (inINR > basePrice) {
                showNotification('Too High!', 'Your offer is higher than base price. Original price applied.');
            } else {
                showNotification('Bargain Rejected', `Minimum acceptable: ${formatPrice(basePrice * 0.7)}`);
            }
        }

        function increaseQty() {
            currentQty++;
            document.getElementById('qty-display').textContent = currentQty;
            document.getElementById('qty-minus').disabled = false;
        }

        function decreaseQty() {
            if (currentQty > 1) {
                currentQty--;
                document.getElementById('qty-display').textContent = currentQty;
            }
            if (currentQty === 1) {
                document.getElementById('qty-minus').disabled = true;
            }
        }

        function addToCart(type) {
            const price = bargainedPrice || categoryDetails[selectedCategory].price;
            const key = `elephant_${selectedCategory}`;
            
            if (!cart[key]) {
                cart[key] = { name: categoryDetails[selectedCategory].title, price: price, qty: 0, type: 'elephant' };
            }
            cart[key].qty += currentQty;
            cart[key].price = price;
            
            updateCartCount();
            showNotification('Added to Cart! üõí', `${currentQty}x ${categoryDetails[selectedCategory].title}`);
        }

        function addProductToCart(id) {
            const product = products.find(p => p.id === id);
            const qty = productQty[id] || 0;
            
            if (qty === 0) {
                showNotification('Select Quantity', 'Please select quantity using +/- buttons');
                return;
            }

            if (!cart[id]) {
                cart[id] = { name: product.name, price: product.price, qty: 0, type: 'product' };
            }
            cart[id].qty += qty;
            
            productQty[id] = 0;
            document.getElementById(`qty-${id}`).textContent = 0;
            
            updateCartCount();
            showNotification('Added to Cart! üõí', `${qty}x ${product.name}`);
        }

        function updateCartCount() {
            const total = Object.values(cart).reduce((sum, item) => sum + item.qty, 0);
            document.getElementById('cart-count').textContent = total;
        }

        function openCartModal() {
            if (Object.keys(cart).length === 0) {
                showNotification('Cart Empty', 'Add items to cart first');
                return;
            }

            let subtotal = 0;
            let itemsHTML = '';

            for (let key in cart) {
                const item = cart[key];
                const itemTotal = item.price * item.qty;
                subtotal += itemTotal;
                
                itemsHTML += `
                    <div class="cart-item">
                        <div>
                            <strong>${item.name}</strong><br>
                            <small style="color: #718096;">${formatPrice(item.price)} √ó ${item.qty}</small>
                        </div>
                        <div style="font-weight: 700;">${formatPrice(itemTotal)}</div>
                    </div>
                `;
            }

            const gst = subtotal * 0.18;
            const total = subtotal + gst;

            const summaryHTML = `
                <div class="cart-summary">
                    <div class="summary-row">
                        <span>Subtotal:</span>
                        <span>${formatPrice(subtotal)}</span>
                    </div>
                    <div class="summary-row">
                        <span>GST (18%):</span>
                        <span>${formatPrice(gst)}</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total:</span>
                        <span>${formatPrice(total)}</span>
                    </div>
                </div>
                <button class="btn btn-primary" style="width: 100%; margin-top: 24px;" onclick="proceedToCheckout()">
                    Proceed to Checkout
                </button>
            `;

            document.getElementById('cart-body').innerHTML = itemsHTML + summaryHTML;
            document.getElementById('cart-modal').classList.add('active');
        }

        function closeCartModal() {
            document.getElementById('cart-modal').classList.remove('active');
        }

        function proceedToCheckout() {
            closeCartModal();
            document.getElementById('checkout-modal').classList.add('active');
        }

        function closeCheckoutModal() {
            document.getElementById('checkout-modal').classList.remove('active');
        }

        function buyNow() {
            addToCart('elephant');
            setTimeout(() => openCartModal(), 500);
        }

        function generateBill() {
            const city = document.getElementById('delivery-city').value.trim();
            const name = document.getElementById('customer-name').value.trim();
            const phone = document.getElementById('customer-phone').value.trim();

            if (!city || !name || !phone) {
                showNotification('Missing Details', 'Please fill all required fields');
                return;
            }

            let subtotal = 0;
            let itemsHTML = '';

            for (let key in cart) {
                const item = cart[key];
                const itemTotal = item.price * item.qty;
                subtotal += itemTotal;
                
                itemsHTML += `
                    <tr>
                        <td>${item.name}</td>
                        <td style="text-align: center;">${item.qty}</td>
                        <td style="text-align: right;">${formatPrice(item.price)}</td>
                        <td style="text-align: right;">${formatPrice(itemTotal)}</td>
                    </tr>
                `;
            }

            const gst = subtotal * 0.18;
            const total = subtotal + gst;

            const billHTML = `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <title>Invoice - The Discarded Elephants</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 40px; max-width: 800px; margin: 0 auto; }
                        .bill-header { border-bottom: 3px solid #d4af37; padding-bottom: 20px; margin-bottom: 30px; }
                        .bill-company { font-size: 28px; font-weight: bold; color: #1a1f2e; margin-bottom: 8px; }
                        .company-details { font-size: 13px; color: #718096; line-height: 1.6; }
                        .invoice-info { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin: 30px 0; }
                        .info-section h3 { font-size: 14px; color: #1a1f2e; margin-bottom: 10px; text-transform: uppercase; }
                        .info-section p { font-size: 13px; color: #718096; line-height: 1.8; margin: 0; }
                        table { width: 100%; border-collapse: collapse; margin: 30px 0; }
                        th { background: #f7fafc; padding: 12px; text-align: left; font-weight: 700; border-bottom: 2px solid #e2e8f0; font-size: 13px; }
                        td { padding: 12px; border-bottom: 1px solid #e2e8f0; font-size: 13px; }
                        .totals { margin-top: 20px; text-align: right; }
                        .totals div { padding: 8px 0; font-size: 14px; }
                        .total-row { font-size: 18px; font-weight: bold; color: #1a1f2e; border-top: 2px solid #e2e8f0; padding-top: 12px !important; margin-top: 12px; }
                        .footer { margin-top: 50px; padding-top: 20px; border-top: 1px solid #e2e8f0; text-align: center; font-size: 11px; color: #718096; }
                        .signature { margin-top: 60px; text-align: right; }
                        .signature-line { border-top: 1px solid #1a1f2e; width: 200px; margin-left: auto; margin-top: 50px; padding-top: 10px; }
                    </style>
                </head>
                <body>
                    <div class="bill-header">
                        <div class="bill-company">üêò THE DISCARDED ELEPHANTS</div>
                        <div class="company-details">
                            <strong>Broken Bone Pvt Ltd</strong><br>
                            Proprietor: Abhishek Sarda<br>
                            Chandrapur, Maharashtra, India<br>
                            Email: support@discardedelephants.com | Phone: +91-XXXX-XXXXXX<br>
                            GSTIN: 27XXXXX1234X1ZX (Sample)
                        </div>
                    </div>

                    <div style="text-align: center; font-size: 24px; font-weight: bold; color: #d4af37; margin: 20px 0;">
                        TAX INVOICE
                    </div>

                    <div class="invoice-info">
                        <div class="info-section">
                            <h3>Bill To:</h3>
                            <p>
                                <strong>${name}</strong><br>
                                ${city}<br>
                                Phone: ${phone}
                            </p>
                        </div>
                        <div class="info-section">
                            <h3>Invoice Details:</h3>
                            <p>
                                Invoice #: INV-${Date.now()}<br>
                                Date: ${new Date().toLocaleDateString()}<br>
                                Currency: ${currentCurrency.code}
                            </p>
                        </div>
                    </div>

                    <table>
                        <thead>
                            <tr>
                                <th>Description</th>
                                <th style="text-align: center;">Quantity</th>
                                <th style="text-align: right;">Unit Price</th>
                                <th style="text-align: right;">Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${itemsHTML}
                        </tbody>
                    </table>

                    <div class="totals">
                        <div><strong>Subtotal:</strong> ${formatPrice(subtotal)}</div>
                        <div><strong>GST (18%):</strong> ${formatPrice(gst)}</div>
                        <div class="total-row"><strong>TOTAL AMOUNT:</strong> ${formatPrice(total)}</div>
                    </div>

                    <div style="background: #fef5e7; padding: 20px; border-radius: 8px; margin-top: 30px;">
                        <strong>Payment Terms:</strong><br>
                        <small>‚Ä¢ Payment due within 30 days of invoice date<br>
                        ‚Ä¢ All prices include applicable GST<br>
                        ‚Ä¢ Delivery timeline: 3-5 business days after payment confirmation</small>
                    </div>

                    <div class="signature">
                        <div class="signature-line">
                            <strong>Authorized Signatory</strong><br>
                            <small>Broken Bone Pvt Ltd</small>
                        </div>
                    </div>

                    <div class="footer">
                        Thank you for choosing The Discarded Elephants!<br>
                        This is a computer-generated invoice and does not require a signature.<br>
                        ¬© 2026 Broken Bone Pvt Ltd. All rights reserved.
                    </div>
                </body>
                </html>
            `;

            const blob = new Blob([billHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Invoice_${Date.now()}.html`;
            a.click();

            showNotification('Order Complete! üéâ', 'Your bill has been downloaded');
            closeCheckoutModal();
            
            // Clear cart
            cart = {};
            updateCartCount();
        }

        function showNotification(title, message) {
            document.getElementById('notif-title').textContent = title;
            document.getElementById('notif-message').textContent = message;
            const notif = document.getElementById('notification');
            notif.classList.add('show');
            setTimeout(() => notif.classList.remove('show'), 3500);
        }

        // Search currency
        document.getElementById('currency-search').addEventListener('input', (e) => {
            const search = e.target.value.toLowerCase();
            document.querySelectorAll('.currency-item').forEach(item => {
                const text = item.textContent.toLowerCase();
                item.style.display = text.includes(search) ? 'flex' : 'none';
            });
        });

        // Close dropdowns
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.currency-selector')) {
                document.getElementById('currency-dropdown').classList.remove('active');
            }
        });

        // Three.js 3D Elephant
        const canvas = document.getElementById('elephant-canvas');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
        
        renderer.setSize(canvas.clientWidth, canvas.clientHeight);
        renderer.setClearColor(0x000000, 0);

        const elephantGroup = new THREE.Group();
        let elephantMaterial = new THREE.MeshPhongMaterial({ color: 0x8b8b8b, shininess: 30 });

        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(5, 5, 5);
        scene.add(directionalLight);

        const pointLight = new THREE.PointLight(0xd4af37, 1, 100);
        pointLight.position.set(-5, 3, 5);
        scene.add(pointLight);

        function buildElephant() {
            elephantGroup.clear();

            const body = new THREE.Mesh(new THREE.SphereGeometry(1.5, 32, 32), elephantMaterial);
            body.scale.set(1, 0.8, 1.2);
            elephantGroup.add(body);

            const head = new THREE.Mesh(new THREE.SphereGeometry(1, 32, 32), elephantMaterial);
            head.position.set(0, 0.3, 1.8);
            elephantGroup.add(head);

            const trunk = new THREE.Mesh(new THREE.CylinderGeometry(0.2, 0.3, 1.5, 16), elephantMaterial);
            trunk.position.set(0, -0.3, 2.5);
            trunk.rotation.x = Math.PI / 4;
            elephantGroup.add(trunk);

            const earGeo = new THREE.SphereGeometry(0.7, 16, 16);
            const leftEar = new THREE.Mesh(earGeo, elephantMaterial);
            leftEar.position.set(-0.9, 0.5, 1.5);
            leftEar.scale.set(0.3, 1, 1);
            elephantGroup.add(leftEar);

            const rightEar = new THREE.Mesh(earGeo, elephantMaterial);
            rightEar.position.set(0.9, 0.5, 1.5);
            rightEar.scale.set(0.3, 1, 1);
            elephantGroup.add(rightEar);

            const legGeo = new THREE.CylinderGeometry(0.3, 0.35, 1.5, 16);
            [[-0.7, -1.5, 0.7], [0.7, -1.5, 0.7], [-0.7, -1.5, -0.7], [0.7, -1.5, -0.7]].forEach(pos => {
                const leg = new THREE.Mesh(legGeo, elephantMaterial);
                leg.position.set(...pos);
                elephantGroup.add(leg);
            });

            const tuskMat = new THREE.MeshPhongMaterial({ color: 0xfffff0, shininess: 100 });
            const tuskGeo = new THREE.CylinderGeometry(0.08, 0.12, 0.8, 8);
            
            const leftTusk = new THREE.Mesh(tuskGeo, tuskMat);
            leftTusk.position.set(-0.3, 0, 2.3);
            leftTusk.rotation.z = -Math.PI / 6;
            leftTusk.rotation.x = Math.PI / 8;
            elephantGroup.add(leftTusk);

            const rightTusk = new THREE.Mesh(tuskGeo, tuskMat);
            rightTusk.position.set(0.3, 0, 2.3);
            rightTusk.rotation.z = Math.PI / 6;
            rightTusk.rotation.x = Math.PI / 8;
            elephantGroup.add(rightTusk);

            const eyeMat = new THREE.MeshPhongMaterial({ color: 0x000000 });
            const eyeGeo = new THREE.SphereGeometry(0.1, 16, 16);
            
            const leftEye = new THREE.Mesh(eyeGeo, eyeMat);
            leftEye.position.set(-0.4, 0.5, 2.2);
            elephantGroup.add(leftEye);

            const rightEye = new THREE.Mesh(eyeGeo, eyeMat);
            rightEye.position.set(0.4, 0.5, 2.2);
            elephantGroup.add(rightEye);
        }

        buildElephant();
        scene.add(elephantGroup);
        camera.position.set(0, 1, 6);

        function updateElephantAppearance() {
            const colors = {
                big: 0x8b8b8b,
                small: 0xa8a8a8,
                intelligent: 0x6a5acd,
                sad: 0x778899,
                guilty: 0x696969
            };
            elephantMaterial.color.setHex(colors[selectedCategory]);
            buildElephant();
        }

        let time = 0;
        function animate() {
            requestAnimationFrame(animate);
            time += 0.008;
            elephantGroup.rotation.y = Math.sin(time * 0.5) * 0.3;
            elephantGroup.position.y = Math.sin(time) * 0.1;
            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = canvas.clientWidth / canvas.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(canvas.clientWidth, canvas.clientHeight);
        });
    </script>
</body>
</html>
